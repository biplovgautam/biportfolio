{% extends 'base.html' %}
{% load static %}

{% block title %}{{ project.title }} - Project Details{% endblock %}

{% block style %}{% static 'css/project.css' %}{% endblock %}

{% block body %}
<!-- Main Content Area -->
<main class="main-content">
    <!-- Simple Navigation -->
    <section class="project-nav">
        <div class="container">
            <div class="nav-links fade-in-up">
                <a href="{% url 'home' %}" class="nav-link">
                    <i class="fas fa-home"></i> Home
                </a>
                <span>/</span>
                <a href="{% url 'projects' %}" class="nav-link">Projects</a>
                <span>/</span>
                <span class="current">{{ project.title }}</span>
            </div>
            <a href="javascript:history.back()" class="back-link fade-in-up">
                <i class="fas fa-arrow-left"></i> Back
            </a>
        </div>
    </section>

    <!-- Project Hero Section -->
    <section class="project-hero">
        <div class="container">
            <div class="hero-content fade-in-up">
                <h1 class="hero-title">{{ project.title }}</h1>
                <p class="hero-description">{{ project.short_description }}</p>
                
                <!-- Tech Stack Pills -->
                {% if project.technologies.all %}
                <div class="tech-stack">
                    {% for tech in project.technologies.all %}
                    <span class="tech-pill">{{ tech.name }}</span>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Action Buttons -->
                <div class="action-buttons">
                    {% if project.github_url %}
                    <a href="{{ project.github_url }}" target="_blank" class="btn btn-primary">
                        <i class="fab fa-github"></i> View Code
                    </a>
                    {% endif %}
                    {% if project.demo_url %}
                    <a href="{{ project.demo_url }}" target="_blank" class="btn btn-secondary">
                        <i class="fas fa-external-link-alt"></i> Live Demo
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Project Content -->
    <section class="project-content">
        <div class="container">
            <div class="content-grid fade-in-up">
                <!-- Project Media -->
                <div class="project-media">
                    {% if project.images.all %}
                        {% if project.images.all|length > 1 %}
                        <!-- Multiple Images - Gallery -->
                        <div class="image-gallery">
                            <div class="main-image">
                                {% for image in project.images.all %}
                                <div class="gallery-slide {% if forloop.first %}active{% endif %}">
                                    <img src="{{ image.image.url }}" alt="{{ image.caption|default:project.title }}">
                                </div>
                                {% endfor %}
                            </div>
                            <div class="image-thumbnails">
                                {% for image in project.images.all %}
                                <div class="thumbnail {% if forloop.first %}active{% endif %}">
                                    <img src="{{ image.image.url }}" alt="{{ image.caption|default:project.title }}">
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <!-- Single Image -->
                        <div class="single-image">
                            <img src="{{ project.images.first.image.url }}" alt="{{ project.images.first.caption|default:project.title }}">
                        </div>
                        {% endif %}
                    {% else %}
                    <!-- Placeholder if no images -->
                    <div class="single-image">
                        <img src="{% static 'images/placeholder.jpg' %}" alt="{{ project.title }}">
                    </div>
                    {% endif %}
                </div>

                <!-- Project Details -->
                <div class="project-details">
                    <!-- Project Information -->
                    <div class="detail-section">
                        <h2><i class="fas fa-info-circle"></i> Project Information</h2>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="label">Status</span>
                                <span class="value">{{ project.status|default:"In Development" }}</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Category</span>
                                <span class="value">{{ project.category|default:"Web Development" }}</span>
                            </div>
                            {% if project.is_featured %}
                            <div class="info-item">
                                <span class="label">Featured</span>
                                <span class="value featured">
                                    <i class="fas fa-star"></i> Yes
                                </span>
                            </div>
                            {% endif %}
                            <div class="info-item">
                                <span class="label">Created</span>
                                <span class="value">{{ project.created_date|date:"F Y" }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Technologies Used -->
                    {% if project.technologies.all %}
                    <div class="detail-section">
                        <h3><i class="fas fa-code"></i> Technologies Used</h3>
                        <div class="tech-tags">
                            {% for tech in project.technologies.all %}
                            <span class="tech-tag">{{ tech.name }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Quick Links -->
                    <div class="detail-section">
                        <h3><i class="fas fa-link"></i> Quick Links</h3>
                        <div class="quick-links">
                            {% if project.github_url %}
                            <a href="{{ project.github_url }}" target="_blank" class="quick-link">
                                <i class="fab fa-github"></i>
                                <span>Source Code</span>
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                            {% endif %}
                            {% if project.demo_url %}
                            <a href="{{ project.demo_url }}" target="_blank" class="quick-link">
                                <i class="fas fa-globe"></i>
                                <span>Live Demo</span>
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                            {% endif %}
                            <a href="{% url 'projects' %}" class="quick-link">
                                <i class="fas fa-folder"></i>
                                <span>All Projects</span>
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Project Description -->
    {% if project.long_description %}
    <section class="project-description">
        <div class="container">
            <div class="detail-section fade-in-up">
                <h2><i class="fas fa-align-left"></i> About This Project</h2>
                <div class="description">
                    {{ project.long_description|linebreaks }}
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Related Projects -->
    {% if related_projects %}
    <section class="related-projects">
        <div class="container">
            <h2 class="section-title fade-in-up">
                <i class="fas fa-layer-group"></i> Related Projects
            </h2>
            <div class="projects-slider fade-in-up">
                {% for related_project in related_projects %}
                <div class="related-card">
                    {% if related_project.images.first %}
                    <div class="card-image">
                        <img src="{{ related_project.images.first.image.url }}" alt="{{ related_project.title }}">
                    </div>
                    {% endif %}
                    <div class="card-content">
                        <h3>{{ related_project.title }}</h3>
                        <p>{{ related_project.short_description }}</p>
                        <a href="{% url 'project_detail' related_project.id %}" class="card-link">
                            View Project <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="view-all-container fade-in-up">
                <a href="{% url 'projects' %}" class="view-all-btn">
                    <i class="fas fa-grid-2"></i> View All Projects
                </a>
            </div>
        </div>
    </section>
    {% endif %}
</main>
{% endblock %}
